!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.PayseraCheckout=n():e.PayseraCheckout=n()}(this,function(){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=11)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={SUCCESS:"success",ERROR:"error"}},function(e,n,t){!function(n,t){e.exports=t()}(0,function(){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(){i(this,e),this.listeners={}}return r(e,[{key:"on",value:function(e,n){return Array.isArray(this.listeners[e])||(this.listeners[e]=[]),this.listeners[e].push(n),this}},{key:"off",value:function(e,n){if(Array.isArray(this.listeners[e]))for(var t=0;t<this.listeners[e].length;t++){var i=this.listeners[e][t];if(i===n){this.listeners[e].splice(t,1);break}}return this}},{key:"emit",value:function(e,n){Array.isArray(this.listeners[e])&&this.listeners[e].forEach(function(e){return e(n)})}}],[{key:"forwardMessage",value:function(e,n){return function(t){e.emit(n,t)}}}]),e}();n.default=o},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return i(r).default}})}])})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={SUCCESS:"success",ERROR:"error",CLOSE:"close"}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={OPEN:"open",USER_CLOSED:"user-closed",CARD_INITIAL_RESULT_FAILED:"card-initial-result-failed",CARD_AUTHORIZATION_FAILED:"card-authorization-failed",CARD_RESULT_FAILED:"card-result-failed",CARD_SIGNATURE_FAILED:"card-signature-failed"}},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(1),s=t(7),u=i(s),c=t(0),l=i(c),f=t(6),d=i(f),h=function(){function e(n){r(this,e),this.observable=new a.EventEmitter,this.checkout=new d.default(void 0===n?u.default.CHECKOUT_URL:n),this.init()}return o(e,[{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"init",value:function(){this.initListeners()}},{key:"initListeners",value:function(){this.offListeners(),this.checkout.on(l.default.SUCCESS,a.EventEmitter.forwardMessage(this.observable,l.default.SUCCESS)),this.checkout.on(l.default.ERROR,a.EventEmitter.forwardMessage(this.observable,l.default.ERROR))}},{key:"offListeners",value:function(){this.checkout.off(l.default.SUCCESS,a.EventEmitter.forwardMessage(this.observable,l.default.SUCCESS)),this.checkout.off(l.default.ERROR,a.EventEmitter.forwardMessage(this.observable,l.default.ERROR))}},{key:"pay",value:function(e){this.checkout.pay(e)}},{key:"dismiss",value:function(){this.checkout.dismiss()}}]),e}();n.default=h},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(10),s=i(a),u=t(9),c=i(u),l=function(){function e(n,t){r(this,e),this.url=n,this.document=t,this.iframe=null,this.form=null}return o(e,[{key:"init",value:function(){this.createIframe(),this.createForm()}},{key:"open",value:function(e){null!==this.iframe&&null!==this.form&&(this.form.setData(e),this.form.submit())}},{key:"close",value:function(){this.removeForm(),this.removeIframe()}},{key:"getWindowName",value:function(){return null!==this.iframe?this.iframe.getName():null}},{key:"getWindowInstance",value:function(){return null!==this.iframe?this.iframe.getWindowInstance():null}},{key:"createIframe",value:function(){this.removeIframe(),this.iframe=new s.default,this.addElementToDocument(this.iframe.getElement()),this.iframe.getWindowInstance().document.write('\n            <!doctype html>\n            <html style="width: 100%; height: 100%; margin: 0; padding: 0">\n                <head></head>\n                <body style="width: 100%; height: 100%; margin: 0; padding: 0; text-align: center;">\n                    <div style="display: inline-block; height: 100%; vertical-align: middle;"></div>\n                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTU0cHgnIGhlaWdodD0nMTU0cHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiBjbGFzcz0idWlsLWRlZmF1bHQiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJub25lIiBjbGFzcz0iYmsiPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPSctMXMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nI2ZmZmZmZicgdHJhbnNmb3JtPSdyb3RhdGUoMzAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPSctMC45MTY2NjY2NjY2NjY2NjY2cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjZmZmZmZmJyB0cmFuc2Zvcm09J3JvdGF0ZSg2MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjgzMzMzMzMzMzMzMzMzMzRzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDkwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nLTAuNzVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDEyMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjY2NjY2NjY2NjY2NjY2NjZzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDE1MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjU4MzMzMzMzMzMzMzMzMzRzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDE4MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjVzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDIxMCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjQxNjY2NjY2NjY2NjY2NjdzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDI0MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjMzMzMzMzMzMzMzMzMzMzNzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48cmVjdCAgeD0nNDYuNScgeT0nNDAnIHdpZHRoPSc3JyBoZWlnaHQ9JzIwJyByeD0nNScgcnk9JzUnIGZpbGw9JyNmZmZmZmYnIHRyYW5zZm9ybT0ncm90YXRlKDI3MCA1MCA1MCkgdHJhbnNsYXRlKDAgLTMwKSc+ICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSdvcGFjaXR5JyBmcm9tPScxJyB0bz0nMCcgZHVyPScxcycgYmVnaW49Jy0wLjI1cycgcmVwZWF0Q291bnQ9J2luZGVmaW5pdGUnLz48L3JlY3Q+PHJlY3QgIHg9JzQ2LjUnIHk9JzQwJyB3aWR0aD0nNycgaGVpZ2h0PScyMCcgcng9JzUnIHJ5PSc1JyBmaWxsPScjZmZmZmZmJyB0cmFuc2Zvcm09J3JvdGF0ZSgzMDAgNTAgNTApIHRyYW5zbGF0ZSgwIC0zMCknPiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0nb3BhY2l0eScgZnJvbT0nMScgdG89JzAnIGR1cj0nMXMnIGJlZ2luPSctMC4xNjY2NjY2NjY2NjY2NjY2NnMnIHJlcGVhdENvdW50PSdpbmRlZmluaXRlJy8+PC9yZWN0PjxyZWN0ICB4PSc0Ni41JyB5PSc0MCcgd2lkdGg9JzcnIGhlaWdodD0nMjAnIHJ4PSc1JyByeT0nNScgZmlsbD0nI2ZmZmZmZicgdHJhbnNmb3JtPSdyb3RhdGUoMzMwIDUwIDUwKSB0cmFuc2xhdGUoMCAtMzApJz4gIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9J29wYWNpdHknIGZyb209JzEnIHRvPScwJyBkdXI9JzFzJyBiZWdpbj0nLTAuMDgzMzMzMzMzMzMzMzMzMzNzJyByZXBlYXRDb3VudD0naW5kZWZpbml0ZScvPjwvcmVjdD48L3N2Zz4="\n                         style="vertical-align: middle; width: 154px; height: 154px;"\n                    />\n                </body>\n            </html>\n            '),this.iframe.open()}},{key:"createForm",value:function(){this.removeForm(),this.form=new c.default(this.url,"POST",this.iframe.getName()),this.addElementToDocument(this.form.getElement())}},{key:"removeIframe",value:function(){null!==this.iframe&&(this.removeElementFromDocument(this.iframe.getElement()),this.iframe=null)}},{key:"removeForm",value:function(){null!==this.form&&(this.removeElementFromDocument(this.form.getElement()),this.form=null)}},{key:"addElementToDocument",value:function(e){this.document.getElementsByTagName("body")[0].appendChild(e)}},{key:"removeElementFromDocument",value:function(e){this.document.getElementsByTagName("body")[0].removeChild(e)}}]),e}();n.default=l},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),s=t(1),u=t(13),c=t(2),l=i(c),f=t(0),d=i(f),h=t(5),m=i(h),y=t(8),v=i(y),b=t(12),p=i(b),g=function(){function e(n){var t=this;r(this,e),this.onMessage=function(e){if(null!==e&&"object"===(void 0===e?"undefined":o(e))&&"string"==typeof e.method)switch(e.method){case l.default.SUCCESS:t.onSuccessMessage(e);break;case l.default.ERROR:t.onErrorMessage(e);break;case l.default.CLOSE:t.onCloseMessage(e)}},this.observable=new s.EventEmitter,this.checkoutWindow=new m.default(n,window.document),this.parentWindow=new u.Parent(window,p.default.getUrlDomain(n)),this.init()}return a(e,[{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"init",value:function(){this.initListeners()}},{key:"initListeners",value:function(){this.offListeners(),this.parentWindow.on(u.Event.MESSAGE,this.onMessage)}},{key:"offListeners",value:function(){this.parentWindow.off(u.Event.MESSAGE,this.onMessage)}},{key:"pay",value:function(e){this.checkoutWindow.init();var n=this.checkoutWindow.getWindowName(),t=this.checkoutWindow.getWindowInstance();null!==n&&null!==t?(this.parentWindow.addChild(n,t),this.checkoutWindow.open(e)):this.observable.emit(d.default.ERROR,v.default.openError())}},{key:"dismiss",value:function(){this.checkoutWindow.close()}},{key:"onSuccessMessage",value:function(e){this.observable.emit(d.default.SUCCESS,e.params)}},{key:"onErrorMessage",value:function(e){this.observable.emit(d.default.ERROR,e.params)}},{key:"onCloseMessage",value:function(e){this.checkoutWindow.close()}}]),e}();n.default=g},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={CHECKOUT_URL:"https://bank.paysera.com/pay/"}},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(3),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){i(this,e)}return r(e,null,[{key:"openError",value:function(e){return{code:a.default.OPEN,data:void 0===e?null:e}}}]),e}();n.default=s},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(n,t,r){i(this,e),this.id="paysera_form_"+(new Date).getTime(),this.init(n,t,r)}return r(e,[{key:"init",value:function(e,n,t){this.formElement=document.createElement("form"),this.formElement.id=this.id,this.formElement.action=e,this.formElement.method=n,this.formElement.target=t,this.formElement.style.display="none"}},{key:"getElement",value:function(){return this.formElement}},{key:"setData",value:function(e){var n=this;Object.keys(e).forEach(function(t){var i=document.createElement("input");i.type="hidden",i.name=t,i.value=e[t],n.formElement.appendChild(i)})}},{key:"submit",value:function(){this.formElement.submit()}}]),e}();n.default=o},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(1),a=function(){function e(){i(this,e),this.iframeElement=null,this.name="paysera_iframe_"+(new Date).getTime(),this.observable=new o.EventEmitter,this.createIframe()}return r(e,[{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"createIframe",value:function(){this.iframeElement=document.createElement("iframe"),this.iframeElement.id=this.name,this.iframeElement.name=this.name,this.iframeElement.setAttribute("frameborder","0"),this.iframeElement.setAttribute("allowtransparency","true"),this.iframeElement.style.cssText="\n            z-index: 2147483647;\n            display: none;\n            background: transparent;\n            background: rgba(0, 0, 0, 0.5);\n            border: 0px none transparent;\n            overflow-x: hidden;\n            overflow-y: auto;\n            visibility: hidden;\n            margin: 0;\n            padding: 0;\n            -webkit-tap-highlight-color: transparent;\n            -webkit-touch-callout: none;\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n        ",this.iframeElement.style.visibility="visible"}},{key:"getName",value:function(){return this.name}},{key:"getElement",value:function(){return this.iframeElement}},{key:"getWindowInstance",value:function(){return this.iframeElement.contentWindow}},{key:"open",value:function(){this.iframeElement.style.display="block"}}]),e}();n.default=a},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(2);Object.defineProperty(n,"CheckoutEvent",{enumerable:!0,get:function(){return i(r).default}});var o=t(0);Object.defineProperty(n,"AppEvent",{enumerable:!0,get:function(){return i(o).default}});var a=t(3);Object.defineProperty(n,"ErrorCode",{enumerable:!0,get:function(){return i(a).default}});var s=t(4);Object.defineProperty(n,"App",{enumerable:!0,get:function(){return i(s).default}})},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"getUrlDomain",value:function(e){var n=document.createElement("a");return n.href=e,n.protocol+"//"+n.hostname}}]),e}();n.default=o},function(e,n,t){!function(n,i){e.exports=i(t(14),t(15))}(0,function(e,n){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=6)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={MESSAGE:"paysera.across-windows.message",RAW_MESSAGE:"paysera.across-windows.raw-message",PARENT_WAITING_CHILD_CONNECTION:"paysera.across-windows.waiting-child-connection",PARENT_DISCONNECTED:"paysera.across-windows.parent-disconnected",CHILD_CONNECTED:"paysera.across-windows.child-connected",CHILD_DISCONNECTED:"paysera.across-windows.child-disconnected",CHILD_CLOSED:"paysera.across-windows.child-closed"}},function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(1),s=t(2),u=t(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(){function e(n,t){var o=this;i(this,e),this.onMessage=function(e){if(null!==e&&"object"===(void 0===e?"undefined":r(e))&&null!==e.message&&"object"===r(e.message)&&"string"==typeof e.message.method){if(e.message.method!==c.default.PARENT_WAITING_CHILD_CONNECTION&&!o.isParentMessage(e))return;switch(e.message.method){case c.default.PARENT_WAITING_CHILD_CONNECTION:o.onParentWaitingChildConnection(e);break;case c.default.PARENT_DISCONNECTED:o.onParentDisconnected(e);break;case c.default.MESSAGE:o.onParentMessage(e);break;default:o.onParentRawMessage(e)}}},this.onBeforeUnload=function(){o.disconnect()},this.name=n.name,this.windowInstance=n,this.parent=null,this.observable=new a.EventEmitter,this.communication=new s.WindowsCommunication(n,t),this.messagesBuffer=new s.MessagesBuffer(this.communication),this.waitingParentInstance=null,this.init()}return o(e,[{key:"init",value:function(){this.initListeners(),this.windowInstance.removeEventListener("beforeunload",this.onBeforeUnload),this.windowInstance.addEventListener("beforeunload",this.onBeforeUnload)}},{key:"initListeners",value:function(){this.offListeners(),this.communication.on(s.Event.MESSAGE,this.onMessage)}},{key:"offListeners",value:function(){this.communication.off(s.Event.MESSAGE,this.onMessage)}},{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"isParentMessage",value:function(e){return null===this.parent||this.parent===e.event.source}},{key:"onParentWaitingChildConnection",value:function(e){null===this.parent&&(this.parent=e.event.source,this.sendRawMessageToParent({method:c.default.CHILD_CONNECTED,params:{name:this.name}}),this.observable.emit(c.default.CHILD_CONNECTED,e.message.params))}},{key:"onParentDisconnected",value:function(e){this.parent=null,this.offListeners(),this.observable.emit(c.default.PARENT_DISCONNECTED,e.message.params)}},{key:"onParentMessage",value:function(e){this.observable.emit(c.default.MESSAGE,e.message.params)}},{key:"onParentRawMessage",value:function(e){this.observable.emit(c.default.RAW_MESSAGE,e)}},{key:"disconnect",value:function(){this.sendRawMessageToParent({method:c.default.CHILD_DISCONNECTED,params:{name:this.name}})}},{key:"sendMessageToParent",value:function(e){this.sendRawMessageToParent({method:c.default.MESSAGE,params:e})}},{key:"sendRawMessageToParent",value:function(e){null!==this.parent?this.communication.sendMessage(this.parent,e):(this.messagesBuffer.addMessage("parent",e),this.startWaitingParent())}},{key:"startWaitingParent",value:function(){var e=this;this.stopWaitingParent(),this.waitingParentInstance=setInterval(function(){null!==e.parent&&(e.messagesBuffer.sendMessages("parent",e.parent),e.stopWaitingParent())},100)}},{key:"stopWaitingParent",value:function(){null!==this.waitingParentInstance&&(clearInterval(this.waitingParentInstance),this.waitingParentInstance=null)}}]),e}();n.default=l},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),s=t(1),u=t(2),c=t(0),l=i(c),f=t(5),d=i(f),h=function(){function e(n,t){var i=this;r(this,e),this.onMessage=function(e){if(i.isChildMessage(e)&&null!==e&&"object"===(void 0===e?"undefined":o(e))&&null!==e.message&&"object"===o(e.message)&&"string"==typeof e.message.method)switch(e.message.method){case l.default.CHILD_CONNECTED:i.onChildConnected(e);break;case l.default.CHILD_DISCONNECTED:i.onChildDisconnected(e);break;case l.default.MESSAGE:i.onChildMessage(e);break;default:i.onChildRawMessage(e)}},this.onBeforeUnload=function(){i.sendRawMessageToChildren(l.default.PARENT_DISCONNECTED)},this.windowInstance=n,this.children={},this.observable=new s.EventEmitter,this.communication=new u.WindowsCommunication(this.windowInstance,t),this.init()}return a(e,[{key:"init",value:function(){this.initListeners(),this.windowInstance.removeEventListener("beforeunload",this.onBeforeUnload),this.windowInstance.addEventListener("beforeunload",this.onBeforeUnload)}},{key:"initListeners",value:function(){this.offListeners(),this.communication.on(u.Event.MESSAGE,this.onMessage)}},{key:"offListeners",value:function(){this.communication.off(u.Event.MESSAGE,this.onMessage)}},{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"onChildConnected",value:function(e){this.childConnected(e.message.params.name)}},{key:"onChildDisconnected",value:function(e){this.childDisconnected(e.message.params.name)}},{key:"onChildMessage",value:function(e){this.observable.emit(l.default.MESSAGE,e.message.params)}},{key:"onChildRawMessage",value:function(e){this.observable.emit(l.default.RAW_MESSAGE,e)}},{key:"addChild",value:function(e,n){var t=this;this.children[e]=new d.default(e,n,this.communication,function(){return t.childDisconnected(e)})}},{key:"isChildMessage",value:function(e){for(var n=Object.keys(this.children),t=0;t<n.length;t++)if(this.children[n[t]].getWindowInstance()===e.event.source)return!0;return!1}},{key:"sendMessageToChildren",value:function(e){var n=this;Object.keys(this.children).forEach(function(t){n.sendMessageToChild(t,e)})}},{key:"sendRawMessageToChildren",value:function(e){var n=this;Object.keys(this.children).forEach(function(t){n.sendRawMessageToChildren(t,e)})}},{key:"sendMessageToChild",value:function(e,n){this.communication.sendMessage(this.children[e].getWindowInstance(),{method:l.default.MESSAGE,params:n})}},{key:"sendRawMessageToChild",value:function(e,n){this.communication.sendMessage(this.children[e].getWindowInstance(),n)}},{key:"childConnected",value:function(e){this.children[e]instanceof d.default&&(this.children[e].connected(),this.observable.emit(l.default.CHILD_CONNECTED,{name:e}))}},{key:"childDisconnected",value:function(e){this.children[e]instanceof d.default&&(this.children[e].destroy(),this.observable.emit(l.default.CHILD_DISCONNECTED,{name:e}),delete this.children[e])}}]),e}();n.default=h},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(0),s=i(a),u=t(7),c=i(u),l=function(){function e(n,t,i,o){r(this,e),this.name=n,this.windowInstance=t,this.communication=i,this.pollingInterval=null,this.closeListener=new c.default(this.windowInstance,o),this.startPolling()}return o(e,[{key:"getWindowInstance",value:function(){return this.windowInstance}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollingInterval=setInterval(function(){return e.communication.sendMessage(e.windowInstance,{method:s.default.PARENT_WAITING_CHILD_CONNECTION,params:{name:e.name}})},100)}},{key:"stopPolling",value:function(){null!==this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}},{key:"connected",value:function(){this.stopPolling()}},{key:"destroy",value:function(){this.stopPolling(),this.closeListener.stopListening()}}]),e}();n.default=l},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);Object.defineProperty(n,"Event",{enumerable:!0,get:function(){return i(r).default}});var o=t(4);Object.defineProperty(n,"Parent",{enumerable:!0,get:function(){return i(o).default}});var a=t(3);Object.defineProperty(n,"Child",{enumerable:!0,get:function(){return i(a).default}})},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(n,t){i(this,e),this.window=n,this.onClose=t,this.intervalInstance=null,this.startListening()}return r(e,[{key:"startListening",value:function(){var e=this;this.stopListening(),this.intervalInstance=setInterval(function(){!0===e.window.closed&&(e.stopListening(),e.onClose())},100)}},{key:"stopListening",value:function(){null!==this.intervalInstance&&(clearInterval(this.intervalInstance),this.intervalInstance=null)}}]),e}();n.default=o}])})},function(e,n,t){!function(n,t){e.exports=t()}(0,function(){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(){i(this,e),this.listeners={}}return r(e,[{key:"on",value:function(e,n){return Array.isArray(this.listeners[e])||(this.listeners[e]=[]),this.listeners[e].push(n),this}},{key:"off",value:function(e,n){if(Array.isArray(this.listeners[e]))for(var t=0;t<this.listeners[e].length;t++){var i=this.listeners[e][t];if(i===n){this.listeners[e].splice(t,1);break}}return this}},{key:"emit",value:function(e,n){Array.isArray(this.listeners[e])&&this.listeners[e].forEach(function(e){return e(n)})}}],[{key:"forwardMessage",value:function(e,n){return function(t){e.emit(n,t)}}}]),e}();n.default=o},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return i(r).default}})}])})},function(e,n,t){!function(n,i){e.exports=i(t(16))}(0,function(e){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=4)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={MESSAGE:"paysera.windows-communication.message"}},function(n,t){n.exports=e},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(n){i(this,e),this.communication=n,this.buffer={}}return r(e,[{key:"addMessage",value:function(e,n){Array.isArray(this.buffer[e])||(this.buffer[e]=[]),this.buffer[e].push(n)}},{key:"sendMessages",value:function(e,n,t){if(Array.isArray(this.buffer[e]))for(var i=0;i<this.buffer[e].length;i++)this.communication.sendMessage(n,this.buffer[e][i],t),this.buffer[e].splice(i,1),i-=1}}]),e}();n.default=o},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),a=t(1),s=t(0),u=i(s),c=t(6),l=i(c),f=t(5),d=i(f),h=function(){function e(n,t){var i=this;r(this,e),this.onMessage=function(e){var n=d.default.parseReceivedMessage(e.data);i.observable.emit(u.default.MESSAGE,{message:n,event:e})},this.communicationProvider=new l.default(n,t),this.observable=new a.EventEmitter,this.init()}return o(e,[{key:"init",value:function(){this.communicationProvider.on(u.default.MESSAGE,this.onMessage)}},{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"sendMessage",value:function(e,n,t){return this.communicationProvider.sendMessage(e,d.default.formatMessage(n),t||"*"),this}}]),e}();n.default=h},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);Object.defineProperty(n,"Event",{enumerable:!0,get:function(){return i(r).default}});var o=t(3);Object.defineProperty(n,"WindowsCommunication",{enumerable:!0,get:function(){return i(o).default}});var a=t(2);Object.defineProperty(n,"MessagesBuffer",{enumerable:!0,get:function(){return i(a).default}})},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"formatMessage",value:function(e){return JSON.stringify(e)}},{key:"parseReceivedMessage",value:function(e){return"string"!=typeof e?e:JSON.parse(e)}}]),e}();n.default=o},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(1),a=t(0),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(n,t){var r=this;i(this,e),this.onMessage=function(e){r.isAuthorizedOrigin(e.origin||e.originalEvent.origin)&&r.observable.emit(s.default.MESSAGE,e)},this.authorizedOrigins=t,this.windowInstance=n,this.observable=new o.EventEmitter,this.init()}return r(e,[{key:"init",value:function(){this.initListener()}},{key:"on",value:function(e,n){return this.observable.on(e,n)}},{key:"off",value:function(e,n){return this.observable.off(e,n)}},{key:"initListener",value:function(){this.windowInstance.removeEventListener("message",this.onMessage),this.windowInstance.addEventListener("message",this.onMessage)}},{key:"sendMessage",value:function(e,n,t){return e.postMessage(n,t||"*"),this}},{key:"isAuthorizedOrigin",value:function(e){if("string"==typeof this.authorizedOrigins)return"*"===this.authorizedOrigins||-1!==this.authorizedOrigins.indexOf(e);if(Array.isArray(this.authorizedOrigins))for(var n=0;n<this.authorizedOrigins.length;n++)if(-1!==this.authorizedOrigins[n].indexOf(e))return!0;return!1}}]),e}();n.default=u}])})},function(e,n,t){!function(n,t){e.exports=t()}(0,function(){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=function(){function e(){i(this,e),this.listeners={}}return r(e,[{key:"on",value:function(e,n){return Array.isArray(this.listeners[e])||(this.listeners[e]=[]),this.listeners[e].push(n),this}},{key:"off",value:function(e,n){if(Array.isArray(this.listeners[e]))for(var t=0;t<this.listeners[e].length;t++){var i=this.listeners[e][t];if(i===n){this.listeners[e].splice(t,1);break}}return this}},{key:"emit",value:function(e,n){Array.isArray(this.listeners[e])&&this.listeners[e].forEach(function(e){return e(n)})}}],[{key:"forwardMessage",value:function(e,n){return function(t){e.emit(n,t)}}}]),e}();n.default=o},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0);Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return i(r).default}})}])})}])});
//# sourceMappingURL=app.min.js.map